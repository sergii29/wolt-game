<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>WOLT :: ADMIN GOD PANEL</title>
    <style>
        :root { --main: #00ff00; --bg: #050505; --panel: #111; --danger: #ff3333; }
        body { background: var(--bg); color: var(--main); font-family: 'Consolas', monospace; padding: 20px; font-size: 13px; }
        
        /* –°–ï–¢–ö–ê */
        .container { display: grid; grid-template-columns: 300px 1fr; gap: 20px; max-width: 1400px; margin: 0 auto; }
        
        /* –ë–õ–û–ö–ò */
        .panel { background: var(--panel); border: 1px solid #333; padding: 15px; margin-bottom: 20px; }
        h2 { margin: 0 0 15px 0; border-bottom: 1px solid #333; padding-bottom: 5px; font-size: 16px; color: #fff; text-transform: uppercase; }
        
        /* –¢–ê–ë–õ–ò–¶–ê –ò–ì–†–û–ö–û–í */
        table { width: 100%; border-collapse: collapse; color: #ccc; }
        th { text-align: left; border-bottom: 1px solid #555; padding: 5px; color: var(--main); }
        td { border-bottom: 1px solid #222; padding: 8px 5px; }
        tr:hover { background: #1a1a1a; cursor: pointer; }
        .status-dot { height: 8px; width: 8px; background: #555; border-radius: 50%; display: inline-block; margin-right: 5px; }
        .online { background: #00ff00; box-shadow: 0 0 5px #00ff00; }

        /* –≠–õ–ï–ú–ï–ù–¢–´ –£–ü–†–ê–í–õ–ï–ù–ò–Ø */
        .control-group { margin-bottom: 15px; border-bottom: 1px dashed #333; padding-bottom: 10px; }
        label { display: block; color: #888; margin-bottom: 3px; font-size: 11px; }
        
        input[type="number"], input[type="text"] { 
            background: #000; border: 1px solid #444; color: #fff; padding: 5px; width: 100%; box-sizing: border-box; 
        }
        input[type="range"] { width: 100%; }

        button {
            background: #004400; color: #fff; border: 1px solid var(--main); padding: 8px 12px; 
            cursor: pointer; font-weight: bold; width: 100%; margin-top: 5px; transition: 0.2s;
        }
        button:hover { background: var(--main); color: #000; }
        button.danger { border-color: var(--danger); background: #330000; color: var(--danger); }
        button.danger:hover { background: var(--danger); color: #fff; }
        button.small { width: auto; font-size: 11px; padding: 4px 8px; }

        .value-display { float: right; color: #fff; font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    
    <div class="sidebar">
        <div class="panel">
            <h2>User Database (Local)</h2>
            <div id="player-list">
                </div>
            <div style="margin-top: 10px; font-size: 11px; color: #666;">
                * –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å LocalStorage –±—Ä–∞—É–∑–µ—Ä–∞. <br>–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ç–µ–∫—É—â–∏–π –∞–∫—Ç–∏–≤–Ω—ã–π —Å–µ–π–≤.
            </div>
        </div>

        <div class="panel">
            <h2>World Settings</h2>
            <div class="control-group">
                <label>GLOBAL INFLATION (X)</label>
                <input type="number" id="world-inflation" step="0.1" value="1.0" onchange="applyWorld()">
                <small style="color:#666">–ú–Ω–æ–∂–∏—Ç–µ–ª—å —Ü–µ–Ω –Ω–∞ –¥–æ—Å—Ç–∞–≤–∫—É</small>
            </div>
            <button onclick="applyWorld()">UPDATE SERVER CONFIG</button>
        </div>
        
        <div class="panel" style="border-color: var(--danger)">
            <h2 style="color: var(--danger)">Server Actions</h2>
            <button class="danger" onclick="wipeSave()">WIPE PLAYER DATA</button>
        </div>
    </div>

    <div class="main-content">
        <div class="panel" id="editor-panel" style="opacity: 0.5; pointer-events: none;">
            <h2>Player Editor <span id="current-player-id" style="float:right; color:#666">ID: ---</span></h2>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                
                <div>
                    <h3>Finance & Stats</h3>
                    <div class="control-group">
                        <label>BALANCE (‚ÇΩ)</label>
                        <input type="number" id="p-balance">
                    </div>
                    <div class="control-group">
                        <label>RATING (0.0 - 5.0)</label>
                        <input type="number" id="p-rating" step="0.1" max="5.0">
                    </div>
                    <div class="control-group">
                        <label>TOTAL DELIVERIES (XP)</label>
                        <input type="number" id="p-xp">
                    </div>
                </div>

                <div>
                    <h3>Vitals & Needs</h3>
                    <div class="control-group">
                        <label>ENERGY (%) <span id="val-energy" class="value-display">0</span></label>
                        <input type="range" id="p-energy" min="0" max="100" oninput="updVal('energy')">
                    </div>
                    <div class="control-group">
                        <label>WATER (%) <span id="val-water" class="value-display">0</span></label>
                        <input type="range" id="p-water" min="0" max="100" oninput="updVal('water')">
                    </div>
                    <div class="control-group">
                        <label>MOOD (%) <span id="val-mood" class="value-display">0</span></label>
                        <input type="range" id="p-mood" min="0" max="100" oninput="updVal('mood')">
                    </div>
                    <button class="small" onclick="maxVitals()">MAX ALL</button>
                </div>

            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
                
                <div>
                    <h3>Equipment Durability</h3>
                    <div class="control-group">
                        <label>BIKE STATUS (%) <span id="val-bike" class="value-display">0</span></label>
                        <input type="range" id="p-bike" min="0" max="100" oninput="updVal('bike')">
                    </div>
                    <div class="control-group">
                        <label>BAG STATUS (%) <span id="val-bag" class="value-display">0</span></label>
                        <input type="range" id="p-bag" min="0" max="100" oninput="updVal('bag')">
                    </div>
                    <div class="control-group">
                        <label>PHONE STATUS (%) <span id="val-phone" class="value-display">0</span></label>
                        <input type="range" id="p-phone" min="0" max="100" oninput="updVal('phone')">
                    </div>
                    <button class="small" onclick="repairAll()">REPAIR ALL</button>
                </div>

                <div>
                    <h3>Inventory & Taxi</h3>
                    <div class="control-group">
                        <label>TAXI LICENSE</label>
                        <select id="p-license" style="width:100%; background:#000; color:#fff; padding:5px; border:1px solid #555">
                            <option value="false">‚ùå NO LICENSE</option>
                            <option value="true">‚úÖ ACTIVE</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label>VEHICLE</label>
                        <select id="p-vehicle" style="width:100%; background:#000; color:#fff; padding:5px; border:1px solid #555">
                            <option value="null">üö≤ BICYCLE ONLY</option>
                            <option value="cyber_taxi">üöñ CYBER TAXI 2077</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label>CRAFT PARTS (Qty)</label>
                        <div style="display:flex; gap:5px">
                            <input type="number" id="p-chip" placeholder="Chip" title="Chip">
                            <input type="number" id="p-engine" placeholder="Eng" title="Engine">
                            <input type="number" id="p-alloy" placeholder="Alloy" title="Alloy">
                        </div>
                    </div>
                </div>

            </div>

            <br>
            <button onclick="saveChanges()" style="font-size: 16px; padding: 15px;">üíæ SAVE CHANGES TO PLAYER</button>

        </div>
    </div>
</div>

<script>
    const SAVE_KEY = 'wolt_game_save_v1';
    const CFG_KEY = 'wolt_admin_config';
    let currentPlayer = null;

    // --- 1. –ó–ê–ì–†–£–ó–ö–ê –°–ü–ò–°–ö–ê –ò–ì–†–û–ö–û–í (–°–ò–ú–£–õ–Ø–¶–ò–Ø –ë–î) ---
    function loadUserTable() {
        const raw = localStorage.getItem(SAVE_KEY);
        const list = document.getElementById('player-list');
        list.innerHTML = `
            <table>
                <thead><tr><th>Status</th><th>Name</th><th>Balance</th><th>Action</th></tr></thead>
                <tbody id="user-rows"></tbody>
            </table>
        `;

        const tbody = document.getElementById('user-rows');
        
        if (raw) {
            const data = JSON.parse(raw);
            currentPlayer = data; // –ö—ç—à–∏—Ä—É–µ–º
            
            // –°–æ–∑–¥–∞–µ–º —Å—Ç—Ä–æ–∫—É –∏–≥—Ä–æ–∫–∞
            const tr = document.createElement('tr');
            tr.innerHTML = `
                <td><span class="status-dot online"></span>Active</td>
                <td>Courier_Local</td>
                <td style="color:#fff">${Math.floor(data.balance)} ‚ÇΩ</td>
                <td><button class="small" onclick="selectPlayer()">EDIT</button></td>
            `;
            tbody.appendChild(tr);
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ–º –µ–≥–æ
            selectPlayer(); 
        } else {
            tbody.innerHTML = `<tr><td colspan="4" style="text-align:center; padding:20px; color:#555">NO PLAYERS FOUND IN DATABASE</td></tr>`;
            disableEditor();
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥–∞ –º–∏—Ä–∞
        const cfg = localStorage.getItem(CFG_KEY);
        if(cfg) document.getElementById('world-inflation').value = JSON.parse(cfg).inflation;
    }

    // --- 2. –í–´–ë–û–† –ò–ì–†–û–ö–ê (–ó–ê–ü–û–õ–ù–ï–ù–ò–ï –ü–û–õ–ï–ô) ---
    function selectPlayer() {
        if (!currentPlayer) return;

        const p = document.getElementById('editor-panel');
        p.style.opacity = '1';
        p.style.pointerEvents = 'all';
        document.getElementById('current-player-id').innerText = "ID: LOCAL_USER_01";

        // –§–∏–Ω–∞–Ω—Å—ã
        document.getElementById('p-balance').value = currentPlayer.balance;
        document.getElementById('p-rating').value = currentPlayer.stats.rating;
        document.getElementById('p-xp').value = currentPlayer.stats.total_deliveries;

        // Needs
        setRange('p-energy', currentPlayer.needs.energy);
        setRange('p-water', currentPlayer.needs.water);
        setRange('p-mood', currentPlayer.needs.mood);

        // Items
        if(!currentPlayer.items) currentPlayer.items = {bike:100, bag:100, phone:100, gear:100};
        setRange('p-bike', currentPlayer.items.bike);
        setRange('p-bag', currentPlayer.items.bag);
        setRange('p-phone', currentPlayer.items.phone);

        // Taxi & Inventory
        if(!currentPlayer.taxi) currentPlayer.taxi = {license:false, vehicle:null};
        document.getElementById('p-license').value = currentPlayer.taxi.license.toString();
        document.getElementById('p-vehicle').value = currentPlayer.taxi.vehicle || "null";

        if(!currentPlayer.inventory) currentPlayer.inventory = {};
        document.getElementById('p-chip').value = currentPlayer.inventory.part_chip || 0;
        document.getElementById('p-engine').value = currentPlayer.inventory.part_engine || 0;
        document.getElementById('p-alloy').value = currentPlayer.inventory.part_alloy || 0;
    }

    // --- 3. –°–û–•–†–ê–ù–ï–ù–ò–ï (SAVE) ---
    function saveChanges() {
        if (!currentPlayer) return;

        // –ß–∏—Ç–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –ø–æ–ª–µ–π
        currentPlayer.balance = parseFloat(document.getElementById('p-balance').value);
        currentPlayer.stats.rating = parseFloat(document.getElementById('p-rating').value);
        currentPlayer.stats.total_deliveries = parseInt(document.getElementById('p-xp').value);

        currentPlayer.needs.energy = parseInt(document.getElementById('p-energy').value);
        currentPlayer.needs.water = parseInt(document.getElementById('p-water').value);
        currentPlayer.needs.mood = parseInt(document.getElementById('p-mood').value);

        currentPlayer.items.bike = parseInt(document.getElementById('p-bike').value);
        currentPlayer.items.bag = parseInt(document.getElementById('p-bag').value);
        currentPlayer.items.phone = parseInt(document.getElementById('p-phone').value);

        currentPlayer.taxi.license = (document.getElementById('p-license').value === 'true');
        const veh = document.getElementById('p-vehicle').value;
        currentPlayer.taxi.vehicle = (veh === 'null') ? null : veh;

        currentPlayer.inventory.part_chip = parseInt(document.getElementById('p-chip').value);
        currentPlayer.inventory.part_engine = parseInt(document.getElementById('p-engine').value);
        currentPlayer.inventory.part_alloy = parseInt(document.getElementById('p-alloy').value);

        // –ü–∏—à–µ–º –≤ –±–∞–∑—É
        localStorage.setItem(SAVE_KEY, JSON.stringify(currentPlayer));
        alert('‚úÖ PLAYER DATA SAVED SUCCESSFULLY');
        loadUserTable(); // –û–±–Ω–æ–≤–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É
    }

    // --- 4. –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò ---
    
    function setRange(id, val) {
        const el = document.getElementById(id);
        el.value = val;
        // –û–±–Ω–æ–≤–∏—Ç—å —Ü–∏—Ñ—Ä—É —Ä—è–¥–æ–º
        const type = id.split('-')[1];
        document.getElementById('val-'+type).innerText = val;
    }

    function updVal(type) {
        const val = document.getElementById('p-'+type).value;
        document.getElementById('val-'+type).innerText = val;
    }

    function maxVitals() {
        setRange('p-energy', 100); setRange('p-water', 100); setRange('p-mood', 100);
    }
    
    function repairAll() {
        setRange('p-bike', 100); setRange('p-bag', 100); setRange('p-phone', 100);
    }

    function applyWorld() {
        const inf = document.getElementById('world-inflation').value;
        localStorage.setItem(CFG_KEY, JSON.stringify({ inflation: parseFloat(inf) }));
        alert('üåç WORLD CONFIG UPDATED');
    }

    function wipeSave() {
        if(confirm('CRITICAL: WIPE PLAYER DATA PERMANENTLY?')) {
            localStorage.removeItem(SAVE_KEY);
            location.reload();
        }
    }

    function disableEditor() {
        const p = document.getElementById('editor-panel');
        p.style.opacity = '0.3';
        p.style.pointerEvents = 'none';
    }

    // –ê–≤—Ç–æ—Å—Ç–∞—Ä—Ç
    loadUserTable();
    // –û–±–Ω–æ–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫ (–Ω–∞ —Å–ª—É—á–∞–π –µ—Å–ª–∏ –∏–≥—Ä–∞ –∑–∞–ø—É—â–µ–Ω–∞ –≤ –¥—Ä—É–≥–æ–º –æ–∫–Ω–µ –∏ –º–µ–Ω—è–µ—Ç –∏—Ö)
    setInterval(() => {
        // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –∏–∑–º–µ–Ω–µ–Ω–∏–π, –Ω–æ –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã –Ω–µ –±—É–¥–µ–º –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞—Ç—å, –µ—Å–ª–∏ –º—ã —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º
    }, 3000);

</script>

</body>
</html>
