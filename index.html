
▶                return `<div style="padding:10px; border-bottom:1px solid #eee; display:flex; justify-content:space-between; align-items:center">
▶                    <div><b>${h.rest}</b>${tipStr}</div>
▶                    <span style="font-weight:bold">+${amount.toFixed(2)}</span>
▶                </div>`;
            }).join(''); 
        }

        function updateTrack(p) { document.getElementById('track-fill').style.width=p+'%'; document.getElementById('track-icon').style.left=p+'%'; }
        
        function resetGame(penalty = 0) {
            let msg = 'Сбросить прогресс?';
            if (penalty > 0) msg += ` С вас будет списано ${penalty} PLN на старте новой игры.`;
            if(confirm(msg)) {
                localStorage.removeItem(SAVE_KEY);
                const newState = {
                    id: state.id, 
                    name: null,
                    balance: 0, debt: (7000 + penalty), debtTimer: Date.now(), debtOverdue: true,
                    loanStreak: 0, 
                    isOnline: false, isSearching: false, scheduledOffline: false,
                    items: { bike: 100, bag: 100, phone: 100, gear: 100 },
                    needs: { energy: 100, water: 100, mood: 100 },
                    inventory: { water: 0, bar: 0, energy_drink: 0, coffee: 0 },
                    repairs: { bike: 0, bag: 0, phone: 0, gear: 0 },
                    history: []
                };
                localStorage.setItem(SAVE_KEY, JSON.stringify(newState));
                location.reload();
            }
        }

    init();
▶  </script>


▶</body> </html>
